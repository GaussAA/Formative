# Formative 多 Tab 交互设计方案

## 一、整体布局架构

### 1.1 页面结构

```
┌─────────────────────────────────────────────────────────────┐
│  Header: 定型 Formative | 导出文档                            │
├─────────────────────────────────────────────────────────────┤
│  Tab导航栏                                                    │
│  [1.需求采集] → [2.风险评估] → [3.技术选型] → [4.MVP规划] → [5.生成文档] │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  主内容区（根据当前Tab显示不同内容）                              │
│                                                              │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

### 1.2 Tab 导航设计

- **视觉状态**：

  - 未完成：灰色、不可点击
  - 进行中：蓝色高亮、脉动动画
  - 已完成：绿色、可点击（支持回滚查看）

- **进度指示**：
  - 每个 Tab 之间有箭头连接线
  - 已完成的 Tab 显示 ✓ 标记
  - 当前 Tab 有下划线高亮

---

## 二、各 Tab 详细设计

### Tab 1: 需求采集 (保留现有设计)

**保持不变**：

- 对话模式 / 表单模式切换
- 右侧信息面板
- 完备度进度条

**新增**：

- 完成后显示"继续下一步"按钮，切换到风险评估 Tab

---

### Tab 2: 风险评估

#### 2.1 布局设计

```
┌─────────────────────────────────────────────────────────────┐
│  风险分析                                                     │
│  根据您的需求，我们识别到以下风险点：                            │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │
│  │ 🔴 高风险    │  │ 🟡 中风险    │  │ 🟢 低风险    │          │
│  │ 技术复杂度   │  │ 范围管理     │  │ 第三方依赖   │          │
│  │ CPU模拟精度 │  │ 功能边界     │  │ 性能优化     │          │
│  └─────────────┘  └─────────────┘  └─────────────┘          │
├─────────────────────────────────────────────────────────────┤
│  推荐实施方案                                                 │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ 📋 方案对比                                          │    │
│  ├─────────────┬──────────┬──────────┬──────────┤    │
│  │            │ 保守方案  │ 平衡方案  │ 激进方案  │    │
│  ├─────────────┼──────────┼──────────┼──────────┤    │
│  │ 开发周期    │ 2-3周    │ 4-6周    │ 8-10周   │    │
│  │ 功能范围    │ 单一模块  │ 核心模块  │ 完整功能  │    │
│  │ 技术风险    │ 低       │ 中       │ 高       │    │
│  │ 可扩展性    │ 一般     │ 良好     │ 优秀     │    │
│  └─────────────┴──────────┴──────────┴──────────┘    │
│                                                         │
│  [选择方案按钮区]                                         │
│  ○ 保守方案  ○ 平衡方案  ○ 激进方案                      │
│                                                         │
│  [确认选择] 按钮                                          │
└─────────────────────────────────────────────────────────┘
```

#### 2.2 交互流程

1. **进入阶段**：自动运行风险分析，显示加载动画
2. **展示风险**：
   - 风险卡片按严重程度分组展示
   - 点击风险卡片可查看详细说明
   - 显示风险影响的功能点
3. **方案选择**：
   - 三个方案并排展示，默认推荐"平衡方案"（高亮）
   - 点击方案后展开详细说明（优缺点、适用场景）
   - 支持方案对比表格切换视图
4. **确认**：点击"确认选择"进入下一 Tab

---

### Tab 3: 技术选型

#### 3.1 布局设计

```
┌─────────────────────────────────────────────────────────────┐
│  技术栈推荐                                                   │
│  基于您的需求和风险方案，推荐以下技术栈                          │
├─────────────────────────────────────────────────────────────┤
│  推荐类别：[前端为主] / [全栈方案] / [BaaS方案]                │
│                                                              │
│  ┌────────────────────────────────────────────────┐         │
│  │  方案 A：Next.js + Supabase (推荐⭐)            │         │
│  ├────────────────────────────────────────────────┤         │
│  │  📱 前端：Next.js 15 + React 19 + TailwindCSS │         │
│  │  🔧 后端：Supabase (BaaS)                      │         │
│  │  💾 数据库：PostgreSQL (Supabase提供)          │         │
│  │  🚀 部署：Vercel                               │         │
│  │                                                 │         │
│  │  ✅ 优点：快速开发、无需后端维护、自动扩展       │         │
│  │  ⚠️  注意：第三方依赖、数据迁移成本              │         │
│  │  💰 演进成本：低                                │         │
│  │  👥 适合：小团队、快速验证MVP                   │         │
│  │                                                 │         │
│  │  [选择此方案]                                   │         │
│  └────────────────────────────────────────────────┘         │
│                                                              │
│  ┌────────────────────────────────────────────────┐         │
│  │  方案 B：Next.js + Express + MongoDB           │         │
│  │  ... (类似结构)                                 │         │
│  └────────────────────────────────────────────────┘         │
│                                                              │
│  ┌────────────────────────────────────────────────┐         │
│  │  方案 C：纯前端方案 (Next.js + LocalStorage)    │         │
│  │  ... (类似结构)                                 │         │
│  └────────────────────────────────────────────────┘         │
└─────────────────────────────────────────────────────────────┘
```

#### 3.2 交互流程

1. **分类展示**：技术栈按类别分组（前端为主/全栈/BaaS）
2. **卡片交互**：
   - 鼠标悬停卡片放大，显示更多细节
   - 点击卡片展开完整技术栈配置
   - 支持"对比模式"：勾选 2-3 个方案横向对比
3. **详细说明**：
   - 展开后显示技术栈架构图
   - 列出所需依赖和配置
   - 估算开发成本和维护成本
4. **选择确认**：点击"选择此方案"进入 MVP 规划

---

### Tab 4: MVP 规划

#### 4.1 布局设计

```
┌─────────────────────────────────────────────────────────────┐
│  MVP功能边界定义                                              │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────┐  ┌─────────────────────┐           │
│  │  MVP核心功能        │  │  后续版本功能        │           │
│  ├─────────────────────┤  ├─────────────────────┤           │
│  │  ☑ CPU指令执行可视化│  │  ☐ 多核CPU模拟      │           │
│  │  ☑ 基础寄存器展示   │  │  ☐ 缓存命中可视化   │           │
│  │  ☑ 简单指令集支持   │  │  ☐ 流水线冒险处理   │           │
│  │  ☑ 本地数据存储     │  │  ☐ 用户进度同步     │           │
│  │                     │  │  ☐ 协作学习功能     │           │
│  │  [调整功能范围]     │  │                     │           │
│  └─────────────────────┘  └─────────────────────┘           │
├─────────────────────────────────────────────────────────────┤
│  开发计划                                                     │
│  ┌─────────────────────────────────────────────────┐         │
│  │  阶段一 (1-2周)：核心模拟引擎                    │         │
│  │  ├─ 指令解析器                                   │         │
│  │  ├─ 寄存器管理                                   │         │
│  │  └─ 基础UI框架                                   │         │
│  │                                                   │         │
│  │  阶段二 (2-3周)：可视化界面                      │         │
│  │  ├─ 动画效果                                     │         │
│  │  ├─ 交互控制                                     │         │
│  │  └─ 本地存储                                     │         │
│  │                                                   │         │
│  │  预估复杂度：中等                                │         │
│  │  预估工期：3-5周                                 │         │
│  └─────────────────────────────────────────────────┘         │
│                                                              │
│  [确认MVP范围] → 生成文档                                    │
└─────────────────────────────────────────────────────────────┘
```

#### 4.2 交互流程

1. **功能分类**：
   - 左侧：MVP 必须包含的功能（已勾选，可调整）
   - 右侧：后续版本功能（未勾选，可拖拽到左侧）
2. **范围调整**：
   - 支持拖拽功能在"MVP"和"后续版本"之间移动
   - 实时更新开发计划和复杂度评估
   - 如果 MVP 范围过大，显示警告提示
3. **开发计划**：
   - 显示分阶段开发时间轴
   - 可视化展示各阶段的任务
   - 自动评估复杂度和工期
4. **确认**：点击"确认 MVP 范围"进入文档生成

---

### Tab 5: 生成文档

#### 5.1 布局设计

```
┌─────────────────────────────────────────────────────────────┐
│  开发方案文档                                                 │
│  ┌─────────────────────────┐  ┌─────────────────┐           │
│  │  文档预览                │  │  快捷操作        │           │
│  │                         │  │                 │           │
│  │  # 项目概述             │  │  📄 复制文档    │           │
│  │  项目名称：...          │  │  💾 下载Markdown│           │
│  │  产品目标：...          │  │  📧 发送邮件    │           │
│  │                         │  │  🔗 分享链接    │           │
│  │  # 需求分析             │  │                 │           │
│  │  目标用户：...          │  │  [生成新版本]   │           │
│  │  核心功能：...          │  └─────────────────┘           │
│  │                         │                                │
│  │  # 风险评估             │                                │
│  │  风险点：...            │                                │
│  │  应对方案：...          │                                │
│  │                         │                                │
│  │  # 技术选型             │                                │
│  │  技术栈：...            │                                │
│  │                         │                                │
│  │  # MVP规划              │                                │
│  │  核心功能：...          │                                │
│  │  开发计划：...          │                                │
│  │                         │                                │
│  └─────────────────────────┘                                │
│                                                              │
│  [返回修改] [开始新项目]                                      │
└─────────────────────────────────────────────────────────────┘
```

#### 5.2 交互流程

1. **文档生成**：
   - 自动汇总所有阶段的信息
   - 生成结构化 Markdown 文档
   - 支持实时预览
2. **操作选项**：
   - 复制到剪贴板
   - 下载.md 文件
   - 发送邮件（可选）
   - 生成分享链接（可选）
3. **回滚修改**：
   - 点击 Tab 可返回任意阶段修改
   - 修改后自动重新生成文档

---

## 三、状态管理设计

### 3.1 Tab 切换逻辑

```typescript
// Tab状态枚举
enum TabStatus {
  LOCKED, // 未解锁（灰色，不可点击）
  ACTIVE, // 进行中（蓝色高亮）
  COMPLETED, // 已完成（绿色，可回滚查看）
}

// Tab配置
const tabs = [
  { id: 1, name: "需求采集", status: TabStatus.ACTIVE },
  { id: 2, name: "风险评估", status: TabStatus.LOCKED },
  { id: 3, name: "技术选型", status: TabStatus.LOCKED },
  { id: 4, name: "MVP规划", status: TabStatus.LOCKED },
  { id: 5, name: "生成文档", status: TabStatus.LOCKED },
];
```

### 3.2 阶段数据结构

```typescript
interface StageData {
  requirement: RequirementProfile; // 需求数据
  riskAnalysis: {
    risks: Risk[];
    selectedApproach: string;
  };
  techStack: {
    category: string;
    stack: TechStackConfig;
  };
  mvpBoundary: {
    mvpFeatures: string[];
    futureFeatures: string[];
    devPlan: DevPlan;
  };
  finalSpec: string;
}
```

### 3.3 回滚机制

- 每个阶段完成后保存快照
- 支持回到任意已完成的阶段修改
- 修改后需要重新运行后续阶段
- 显示"有未保存的修改"提示

---

## 四、视觉设计要点

### 4.1 色彩方案

- **主色调**：蓝色 (#3B82F6) - 进行中状态
- **成功色**：绿色 (#10B981) - 已完成状态
- **警告色**：黄色 (#F59E0B) - 中等风险
- **危险色**：红色 (#EF4444) - 高风险
- **禁用色**：灰色 (#9CA3AF) - 未解锁状态

### 4.2 动画效果

- Tab 切换：淡入淡出 (300ms)
- 进度条：平滑过渡 (500ms)
- 卡片悬停：微缩放 (200ms)
- 加载状态：脉动动画

### 4.3 响应式设计

- 桌面端：Tab 横向排列
- 移动端：Tab 改为下拉选择器
- 卡片在小屏幕上纵向堆叠

---

## 五、技术实现建议

### 5.1 组件结构

```
src/
├── components/
│   ├── TabNavigation.tsx        // Tab导航栏
│   ├── stages/
│   │   ├── RequirementStage.tsx // 需求采集页面
│   │   ├── RiskStage.tsx        // 风险评估页面
│   │   ├── TechStackStage.tsx   // 技术选型页面
│   │   ├── MVPStage.tsx         // MVP规划页面
│   │   └── DocumentStage.tsx    // 文档生成页面
│   └── shared/
│       ├── RiskCard.tsx         // 风险卡片组件
│       ├── TechStackCard.tsx    // 技术栈卡片
│       └── ProgressBar.tsx      // 进度条
```

### 5.2 状态管理

- 使用 React Context 管理全局阶段数据
- 每个 Tab 的数据独立管理
- 支持数据序列化（localStorage/sessionStorage）

---

## 六、用户体验优化

### 6.1 引导提示

- 首次使用时显示引导蒙层
- 每个 Tab 顶部有简短说明
- 关键操作点有 Tooltip 提示

### 6.2 进度保存

- 自动保存草稿
- 浏览器刷新后恢复进度
- 支持"保存并稍后继续"

### 6.3 错误处理

- 网络错误时显示重试按钮
- LLM 调用失败时提供降级方案
- 表单验证实时反馈

---

## 七、后续扩展预留

### 7.1 历史记录

- 保存用户的历史项目
- 支持加载历史项目继续编辑

### 7.2 协作功能

- 分享链接给团队成员
- 多人协作编辑需求

### 7.3 模板功能

- 预设常见项目类型模板
- 用户可保存自定义模板

---

## 八、设计方案总结

### 优势

1. **清晰的阶段感知**：用户明确知道当前在做什么，还需要做什么
2. **专注的交互体验**：每个阶段有独立的、针对性的交互设计
3. **支持回滚修改**：任何阶段都可以返回修改，灵活性高
4. **可扩展性强**：每个 Tab 独立，方便后续添加新功能
5. **视觉友好**：卡片化、可视化的信息展示，降低认知负担

### 实施建议

1. **第一阶段**：实现 Tab 框架和导航逻辑
2. **第二阶段**：逐个实现各 Tab 的交互界面
3. **第三阶段**：优化动画和视觉效果
4. **第四阶段**：添加回滚机制和数据持久化
